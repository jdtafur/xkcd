<div class="flex flex-col h-full comic-container align-center">
  @if (currentComic$ | async; as currentComic) {
    <ng-container [ngTemplateOutlet]="comic"
                  [ngTemplateOutletContext]="{currentComic}">
    </ng-container>
  }
  <button class="next-comic-button" (click)="getComicByRandomNumber()">
    Ver otro comic
  </button>
</div>

<ng-template #comic let-currentComic="currentComic">
  <h1>{{ currentComic.title }} ({{ currentComic.num }})</h1>
  <!--    <span>{{ date }}</span>-->
  <div class="comic">
    <img [src]="currentComic.img" [alt]="currentComic.alt">
    <ng-container [ngTemplateOutlet]="transcriptTemplate"
                  [ngTemplateOutletContext]="{transcript:currentComic.transcript }">
    </ng-container>
  </div>
</ng-template>

<ng-template #transcriptTemplate let-transcript="transcript">
  <div class="transcript">
    @for (key of getTranscript(transcript); track key) {
      @for (subKey of getSubTranscript(key); track subKey) {
        <p>{{ subKey }}</p>
      }
    }
  </div>
</ng-template>
